
<main>
	<div class="formulario-contenedor">
		<div class="card p-4 shadow" style="max-width: 400px;">
			<h2 class="text-center mb-3">Bienvenido</h2>
			<p class="text-muted text-start mb-4">
				<i class="fas fa-lock me-2"></i> Iniciá sesión
			</p>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
                <div class="mb-3">
					<label for="email" class="form-label">Usuario:</label>
					<input 
						type="email" 
						id="email" 
						formControlName="email" 
						class="form-control"
						[class.is-invalid]="email?.invalid && email?.touched"
						[class.is-valid]="email?.valid && email?.touched"
						placeholder="Correo electrónico">
					
					<!-- Error de email -->
					<div class="invalid-feedback" *ngIf="email?.invalid && email?.touched">
						<div *ngIf="email?.errors?.['required']">El correo electrónico es requerido</div>
						<div *ngIf="email?.errors?.['email']">Ingrese un correo electrónico válido</div>
					</div>
				</div>
				
				<div class="mb-3">
					<label for="password" class="form-label">Contraseña:</label>
					<input 
						type="password" 
						id="password" 
						formControlName="password" 
						class="form-control"
						[class.is-invalid]="password?.invalid && password?.touched"
						[class.is-valid]="password?.valid && password?.touched"
						placeholder="Contraseña">
					
					<!-- Error para password -->
					<div class="invalid-feedback" *ngIf="password?.invalid && password?.touched">
						<div *ngIf="password?.errors?.['required']">La contraseña es requerida</div>
						<div *ngIf="password?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres</div>
					</div>
				</div>
				
				<button 
					type="submit" 
					class="btn btn-primary w-100 mt-3"
					[disabled]="loginForm.invalid || cargando">
					<span *ngIf="cargando" class="spinner-border spinner-border-sm me-2"></span>
					{{ cargando ? 'Iniciando sesión...' : 'Ingresar' }}
				</button>
				
				<p class="text-center mt-3 text-muted">
					¿No sos usuario?
					<a routerLink="/registro" class="text-decoration-none fw-bold">Creá tu cuenta</a>.
				</p>

				<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
                    @if (mostrarToast) {
                    <div class="toast show align-items-center text-bg-{{tipoToast}} border-0">
                        <div class="d-flex">
                            <div class="toast-body">
                                {{ mensajeToast }}
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto"
                                (click)="mostrarToast=false"></button>
                        </div>
                    </div>
                    }
                </div>
			</form>
		</div>

		<div class="imagen-box">
			<div id="carouselLogin" class="carousel slide" data-bs-ride="carousel">
				<div class="carousel-inner">
					<div class="carousel-item active">
						<img src="assets/inventarioRegistro.jpg" class="img-carousel" alt="Imagen 1">
					</div>
					<div class="carousel-item">
						<img src="assets/inventario2.jpg" class="img-carousel" alt="Imagen 2">
					</div>
				</div>
				<button class="carousel-control-prev" type="button" data-bs-target="#carouselLogin" data-bs-slide="prev">
					<span class="carousel-control-prev-icon"></span>
				</button>
				<button class="carousel-control-next" type="button" data-bs-target="#carouselLogin" data-bs-slide="next">
					<span class="carousel-control-next-icon"></span>
				</button>
			</div>
		</div>
	</div>
</main>

